<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>


    <div class="container">
        <h1>Giphy Search</h1>

        <!-- Buttons will Get Dumped Here -->
        <div id="buttonsblock"></div>

        <form id="animal-form">
            <label for="animal-input">Add a animal, Yo!</label>
            <input type="text" id="animal-input" /><br />

            <!-- Button triggers new movie to be added -->
            <input id="add-animal" type="submit" value="Add a animal, Yo!" />
        </form>
        <div id="animal-view"></div>

    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script>

        var animals = [
            "Lions",
            "Penguins",
            "Snakes",
            "Leopards"
        ];


        var giphy = "https://api.giphy.com/v1/gifs/search?q=ryan+gosling&api_key=wyzgUDBimVFKbOtXlyp9NVV61du38AtW&limit=10"
        var giphy = "http://api.giphy.com/v1/gifs/search?q=ryan+gosling&api_key=wyzgUDBimVFKbOtXlyp9NVV61du38AtW&limit=5"

        $("#add-animal").on("click", function (event) {
            // event.preventDefault() prevents the form from trying to submit itself.
            // We're using a form so that the user can hit enter instead of clicking the button if they want
            event.preventDefault();

            // This line will grab the text from the input box
            var newAnimal = $("#animal-input").val().trim();
            // The movie from the textbox is then added to our array
            animals.push(newAnimal);

            // calling renderButtons which handles the processing of our movie array
            displayButtons();
        });

        function displayButtons() {
            $("#buttonsblock").empty()
            for (i = 0; i < animals.length; i++) {
                var buttons = $('<button>');
                buttons.addClass("animal");
                buttons.attr("data-name", animals[i])
                buttons.html(animals[i])
                $('#buttonsblock').append(buttons)
            }
        }
        displayButtons()


        function ajaxAnimal() {

            //$.ajax({
            //     url: giphy,
            //     method: "GET",
            //     dataType:'json',
            // }).then(function(response){
            //     console.log(response)
            //     console.log(response.data[0].url)
            //     var div = $("<div>").html("<img src =" + response.data[0].images.fixed_width.url + "></img>")
            //     $("body").append(div)
            //  })
            var animal = $(this).attr("data-name");
            var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + animal + "&api_key=wyzgUDBimVFKbOtXlyp9NVV61du38AtW&limit=10";
            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function (response) {
                $("#animal-view").append("<img src =" + response.data[0].images.fixed_width.url + "></img>");
                console.log(response)
                console.log(this)
            });

        }


        //bringing in url of oject. how to retrieve item in object
        $(document).on("click", ".animal", ajaxAnimal);

    </script>


</body>

</html>